<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ã€Šå€«æ•¦è’™é›£è¨˜ã€‹æ¨ç†è§£è¬ï½œç°¡åŒ–ç‰ˆï¼ˆæ¡Œæ©Ÿæ‹–æ‹‰ï¼æ‰‹æ©Ÿå¡«å…¥ï¼‰</title>
  <meta name="description" content="ä»¥å­«ä¸­å±±å€«æ•¦è’™é›£äº‹ä»¶ç‚ºä¸»é¡Œçš„ä½é›£åº¦æ¨ç†è§£è¬å°éŠæˆ²ã€‚æ¡Œæ©Ÿä¿ç•™æ‹–æ‹‰ï¼Œæ‰‹æ©Ÿæ”¹ç”¨ä¸‹æ‹‰é¸å–®å¡«å…¥åˆ†é¡ã€‚" />
  <style>
    :root{ --bg:#0e1320; --panel:#101827; --ink:#e6efff; --muted:#9db0cf; --accent:#ffb84d; --accent2:#70d6ff; --ok:#1ad1a5; --warn:#ff6b6b; }
    *{box-sizing:border-box}
    body{margin:0; color:var(--ink); background:linear-gradient(180deg,#0a0f1a,#0e1320); font-family:system-ui,-apple-system,"Noto Sans TC","Microsoft JhengHei",Segoe UI,Roboto,Helvetica,Arial,sans-serif}
    header{padding:28px 18px; text-align:center; background:linear-gradient(180deg,#101827,#0f1626); border-bottom:1px solid #1f2c48}
    header h1{margin:0 0 6px; font-size:1.8rem; letter-spacing:1px}
    header p{margin:0; color:var(--muted)}
    .wrap{max-width:1100px; margin:20px auto; padding:0 16px}
    .hud{display:grid; gap:10px; grid-template-columns: 1fr auto; align-items:center; background:var(--panel); border:1px solid #1f2c48; padding:12px; border-radius:12px; box-shadow:0 6px 20px rgba(0,0,0,.25)}
    .progress{height:10px; background:#1b2743; border-radius:99px; overflow:hidden}
    .progress>div{height:100%; width:0%; background:linear-gradient(90deg, var(--accent), #ffd27a); transition:width 400ms ease}
    .badges{display:flex; gap:8px; flex-wrap:wrap}
    .badge{display:inline-flex; align-items:center; gap:6px; padding:6px 10px; border:1px solid #26345a; border-radius:999px; background:rgba(255,255,255,.03); color:var(--muted); font-size:12px}
    .badge.ok{color:var(--ok); border-color:#235f54; background:rgba(26,209,165,.06)}

    .grid{display:grid; gap:14px}
    @media(min-width:860px){ .grid-2{grid-template-columns:1fr 1fr} }

    .card{background:linear-gradient(180deg, #131c2e, #0f1727); border:1px solid #1f2c48; border-radius:14px; padding:14px; box-shadow:0 8px 26px rgba(0,0,0,.3)}
    h2{font-size:1.25rem; margin:4px 0 8px}
    h3{font-size:1.05rem; margin:6px 0}
    p.muted,.muted{color:var(--muted)}
    .btn{appearance:none; border:1px solid #274064; background:linear-gradient(180deg,#1d2d4a,#16233b); color:#eaf2ff; border-radius:10px; padding:10px 14px; cursor:pointer; font-weight:700}
    .btn:hover{filter:brightness(1.06)}
    .btn.ghost{background:transparent}
    .ok{color:var(--ok)}
    .warn{color:var(--warn)}
    .hidden{display:none !important}

    .cipherPanel{border:1px dashed #2b3a64; border-radius:12px; padding:12px; background:#0e1425}
    .cipherText{font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", monospace; letter-spacing:2px; background:#0a1020; border:1px solid #1c2848; padding:10px; border-radius:8px}
    .slider{width:100%}

    .map{display:grid; grid-template-columns:repeat(2,1fr); gap:10px}
    .place{padding:12px; border:1px solid #25375e; border-radius:10px; background:linear-gradient(180deg,#121b2d,#0d1425); cursor:pointer}
    .place.selected{outline:2px solid var(--accent2)}
    .path{display:flex; gap:6px; flex-wrap:wrap; margin-top:6px}
    .crumb{padding:4px 8px; background:#13203a; border:1px solid #26426f; border-radius:999px; font-size:12px}

    /* Puzzle 3 desktop board */
    .board{display:grid; gap:10px; grid-template-columns:1fr 1fr 1fr}
    .zone{min-height:120px; border:1px dashed #2b3a64; border-radius:12px; padding:8px; background:#0c1426}
    .zone h4{margin:0 0 6px; color:#9cc0ff}
    .clue{display:inline-block; margin:6px; padding:6px 10px; border:1px solid #2a3b60; background:#17233a; border-radius:999px; cursor:grab; font-size:13px}

    /* Puzzle 3 mobile form */
    .p3-mobile-row{display:flex; align-items:center; gap:10px; padding:8px; border:1px solid #2a3c66; border-radius:10px; background:#121a2c; margin-bottom:8px}
    .p3-label{min-width:120px}
    select{padding:8px; border-radius:8px; border:1px solid #2a3c66; background:#0c1426; color:var(--ink)}

    .hint{color:#d6d2a3; background:linear-gradient(180deg,#2b2815,#1e1b0f); border:1px solid #5d4c1a; padding:8px; border-radius:10px}

    .lock{display:grid; grid-template-columns:repeat(4,60px); gap:8px; justify-content:center; margin:10px 0}
    .dial{display:flex; align-items:center; justify-content:center; height:60px; border-radius:10px; background:#101827; border:1px solid #2a3c66; font-size:22px; user-select:none}
    .dial button{all:unset; display:block; width:100%; height:100%; color:#ffd27a; text-align:center; font-weight:700; cursor:pointer}

    .p5-block{border:1px solid #26345a; border-radius:12px; padding:12px; background:#121a2c; margin-bottom:10px}
    .p5-choices label{display:block; padding:8px; border:1px solid #2a3c66; border-radius:10px; margin-bottom:6px; cursor:pointer}
  </style>
</head>
<body>
  <header>
    <h1>å€«æ•¦è¡Œå‹•æª”æ¡ˆï½œã€Šå€«æ•¦è’™é›£è¨˜ã€‹æ¨ç†è§£è¬ï¼ˆä½é›£åº¦ï½œæ¡Œæ©Ÿæ‹–æ‹‰ï¼æ‰‹æ©Ÿå¡«å…¥ï¼‰</h1>
    <p>äº”å€‹äº’å‹•é—œå¡ï¼šå¯†ç¢¼ç ´è­¯ã€è·¯å¾‘é‡å»ºã€è­‰æ“šæ­¸é¡ã€ç¾…é¦¬æ•¸å­—é–‹é–ã€å»¶çºŒæ€§æ•´åˆé¡Œã€‚<strong>æ¡Œæ©Ÿï¼šæ‹–æ‹‰ï¼›æ‰‹æ©Ÿï¼šä¸‹æ‹‰é¸å–®å¡«å…¥</strong>ã€‚</p>
  </header>

  <div class="wrap">
    <div class="hud">
      <div style="display:flex; align-items:center; gap:10px; justify-content:space-between">
        <div class="badges" id="badgeBar">
          <span class="badge" id="b1">ğŸ” å¯†ç¢¼ç ´è­¯</span>
          <span class="badge" id="b2">ğŸ—ºï¸ è·¯å¾‘é‡å»º</span>
          <span class="badge" id="b3">ğŸ“Œ è­‰æ“šæ­¸é¡</span>
          <span class="badge" id="b4">ğŸ§³ é–‹é–è¡Œå‹•</span>
          <span class="badge" id="b5">ğŸ§  å»¶çºŒæ€§æ•´åˆé¡Œ</span>
        </div>
      </div>
      <div style="min-width:260px">
        <div class="progress"><div id="pg"></div></div>
        <div class="muted" style="text-align:right"><span id="pgTxt">0/5</span> é—œå¡å®Œæˆ</div>
      </div>
    </div>

    <!-- Puzzle 1 -->
    <section class="card" id="p1">
      <h2>é—œå¡ä¸€ï½œå¯†ç¢¼ç ´è­¯ï¼šæˆªç²çš„ç´™æ¢</h2>
      <p class="muted">ä½¿ç”¨ä½ç§»æ»‘æ¡¿å˜—è©¦ç ´è­¯å…©æ®µæ–‡å­—ï¼Œè§£å‡ºåœ°é»èˆ‡äººç‰©ã€‚</p>
      <div class="grid grid-2">
        <div class="cipherPanel">
          <h3>ç·šç´¢ Aï¼ˆåœ°é»ï¼‰</h3>
          <div class="cipherText" id="cipherA"></div>
          <label>ä½ç§»ï¼š<input type="range" min="0" max="25" value="0" class="slider" id="shiftA"></label>
          <div class="muted">è§£ç¢¼çµæœï¼š<span id="plainA">â€”</span></div>
        </div>
        <div class="cipherPanel">
          <h3>ç·šç´¢ Bï¼ˆäººç‰©ï¼‰</h3>
          <div class="cipherText" id="cipherB"></div>
          <label>ä½ç§»ï¼š<input type="range" min="0" max="25" value="0" class="slider" id="shiftB"></label>
          <div class="muted">è§£ç¢¼çµæœï¼š<span id="plainB">â€”</span></div>
        </div>
      </div>
      <div style="margin-top:10px; display:flex; gap:8px">
        <button class="btn" id="checkP1">æª¢æŸ¥</button>
        <button class="btn ghost" id="hintP1">æç¤º</button>
      </div>
      <p id="p1Res"></p>
      <div id="p1Explain" class="hidden">
        <h3>è¬›è§£</h3>
        <p class="muted">æ¸…æœé§å€«æ•¦ä½¿é¤¨ä½æ–¼ <em>Portland Place</em> ä¸€å¸¶ï¼›æ•‘æ´é—œéµäººç‰©ç‚º <em>James Cantlieï¼ˆåº·å¾·é»ï¼‰</em>ã€‚</p>
      </div>
    </section>

    <!-- Puzzle 2 -->
    <section class="card" id="p2">
      <h2>é—œå¡äºŒï½œè·¯å¾‘é‡å»ºï¼šå€«æ•¦åœ°åœ–æ¿</h2>
      <p class="muted">ä¾äº‹ä»¶æ¨é€²é †åºé»é¸åœ°é»ï¼Œå½¢æˆè·¯å¾‘ï¼ˆ5 æ­¥ï¼‰ã€‚</p>
      <div class="map" id="map">
        <div class="place" data-k="A">ğŸ›ï¸ æ¸…ä½¿é¤¨ï¼ˆPortland Placeï¼‰</div>
        <div class="place" data-k="B">ğŸ‘¨â€âš•ï¸ é†«å¸«å¯“æ‰€ï¼ˆåº·å¾·é»ï¼‰</div>
        <div class="place" data-k="C">ğŸ“° å ±ç¤¾ï¼ˆThe Times ç­‰ï¼‰</div>
        <div class="place" data-k="D">ğŸ‘® è˜‡æ ¼è˜­å ´ï¼ˆå€«æ•¦è­¦å¯Ÿå»³ï¼‰</div>
        <div class="place" data-k="E">ğŸ¤ è‹±åœ‹å¤–äº¤éƒ¨ï¼ˆForeign Officeï¼‰</div>
      </div>
      <div class="path" id="path"></div>
      <div style="margin-top:10px; display:flex; gap:8px">
        <button class="btn" id="undoPath">æ’¤éŠ·ä¸€æ­¥</button>
        <button class="btn" id="checkP2">æª¢æŸ¥</button>
        <button class="btn ghost" id="hintP2">æç¤º</button>
      </div>
      <p id="p2Res"></p>
      <div id="p2Explain" class="hidden">
        <h3>è¬›è§£</h3>
        <p class="muted">äº‹ä»¶æ¨é€²ï¼šä½¿é¤¨æ‹˜ç¦ â†’ åº·å¾·é»æ±‚åŠ© â†’ åª’é«”é—œæ³¨ â†’ è­¦æ–¹ä»‹å…¥ â†’ å¤–äº¤éƒ¨æ–½å£“ï¼ˆè€Œå¾Œç²é‡‹ï¼‰ã€‚</p>
      </div>
    </section>

    <!-- Puzzle 3: Desktop drag or Mobile dropdown -->
    <section class="card" id="p3">
      <h2>é—œå¡ä¸‰ï½œè­‰æ“šæ­¸é¡ï¼šæ¡ˆä»¶æ¨æ¼”æ¿</h2>
      <p class="muted" id="p3Hint">æ¡Œæ©Ÿï¼šæ‹–æ‹‰åˆ°åˆ†é¡æ¡†ï¼›æ‰‹æ©Ÿï¼šä»¥ä¸‹æ‹‰é¸å–®ç‚ºæ¯æ¢ç·šç´¢é¸æ“‡ã€Œæ³•ç†ï¼è¼¿è«–ï¼è¡Œå‹•ã€ã€‚è‡³å°‘æ”¾å° 6/7 å³éé—œã€‚</p>

      <!-- Desktop board -->
      <div id="p3Desktop">
        <div id="cluesPool" style="display:flex; flex-wrap:wrap">
          <span class="clue" draggable="true" data-cat="law">å¤–äº¤è±å…</span>
          <span class="clue" draggable="true" data-cat="law">äººèº«è‡ªç”±</span>
          <span class="clue" draggable="true" data-cat="op">åª’é«”å ±å°</span>
          <span class="clue" draggable="true" data-cat="op">åœ‹éš›é—œæ³¨</span>
          <span class="clue" draggable="true" data-cat="act">è­¦æ–¹ä»‹å…¥</span>
          <span class="clue" draggable="true" data-cat="act">å¤–äº¤éƒ¨æ–½å£“</span>
          <span class="clue" draggable="true" data-cat="act">åº·å¾·é»å¥”èµ°</span>
        </div>
        <div class="board" style="margin-top:10px">
          <div class="zone" data-zone="law"><h4>æ³•ç†</h4></div>
          <div class="zone" data-zone="op"><h4>è¼¿è«–</h4></div>
          <div class="zone" data-zone="act"><h4>è¡Œå‹•</h4></div>
        </div>
      </div>

      <!-- Mobile form -->
      <div id="p3Mobile" class="hidden" aria-labelledby="p3Hint">
        <div class="p3-mobile-row" data-ans="law"><span class="p3-label">å¤–äº¤è±å…</span>
          <select>
            <option value="">â€” é¸é¡åˆ¥ â€”</option>
            <option value="law">æ³•ç†</option>
            <option value="op">è¼¿è«–</option>
            <option value="act">è¡Œå‹•</option>
          </select>
        </div>
        <div class="p3-mobile-row" data-ans="law"><span class="p3-label">äººèº«è‡ªç”±</span>
          <select>
            <option value="">â€” é¸é¡åˆ¥ â€”</option>
            <option value="law">æ³•ç†</option>
            <option value="op">è¼¿è«–</option>
            <option value="act">è¡Œå‹•</option>
          </select>
        </div>
        <div class="p3-mobile-row" data-ans="op"><span class="p3-label">åª’é«”å ±å°</span>
          <select>
            <option value="">â€” é¸é¡åˆ¥ â€”</option>
            <option value="law">æ³•ç†</option>
            <option value="op">è¼¿è«–</option>
            <option value="act">è¡Œå‹•</option>
          </select>
        </div>
        <div class="p3-mobile-row" data-ans="op"><span class="p3-label">åœ‹éš›é—œæ³¨</span>
          <select>
            <option value="">â€” é¸é¡åˆ¥ â€”</option>
            <option value="law">æ³•ç†</option>
            <option value="op">è¼¿è«–</option>
            <option value="act">è¡Œå‹•</option>
          </select>
        </div>
        <div class="p3-mobile-row" data-ans="act"><span class="p3-label">è­¦æ–¹ä»‹å…¥</span>
          <select>
            <option value="">â€” é¸é¡åˆ¥ â€”</option>
            <option value="law">æ³•ç†</option>
            <option value="op">è¼¿è«–</option>
            <option value="act">è¡Œå‹•</option>
          </select>
        </div>
        <div class="p3-mobile-row" data-ans="act"><span class="p3-label">å¤–äº¤éƒ¨æ–½å£“</span>
          <select>
            <option value="">â€” é¸é¡åˆ¥ â€”</option>
            <option value="law">æ³•ç†</option>
            <option value="op">è¼¿è«–</option>
            <option value="act">è¡Œå‹•</option>
          </select>
        </div>
        <div class="p3-mobile-row" data-ans="act"><span class="p3-label">åº·å¾·é»å¥”èµ°</span>
          <select>
            <option value="">â€” é¸é¡åˆ¥ â€”</option>
            <option value="law">æ³•ç†</option>
            <option value="op">è¼¿è«–</option>
            <option value="act">è¡Œå‹•</option>
          </select>
        </div>
      </div>

      <div style="margin-top:10px; display:flex; gap:8px">
        <button class="btn" id="checkP3">æª¢æŸ¥</button>
        <button class="btn ghost" id="hintP3">æç¤º</button>
      </div>
      <p id="p3Res"></p>
      <div id="p3Explain" class="hidden">
        <h3>è¬›è§£</h3>
        <p class="muted">ä¸‰è‚¡åŠ›é‡äº’å‹•ï¼š<strong>æ³•ç†</strong>ï¼ˆå¤–äº¤è±å…ã€äººèº«è‡ªç”±ï¼‰ã€<strong>è¼¿è«–</strong>ï¼ˆåª’é«”å ±å°ã€åœ‹éš›é—œæ³¨ï¼‰ã€<strong>è¡Œå‹•</strong>ï¼ˆè­¦æ–¹èˆ‡å¤–äº¤éƒ¨ä»‹å…¥ã€åº·å¾·é»å¥”èµ°ï¼‰ã€‚</p>
      </div>
    </section>

    <!-- Puzzle 4 -->
    <section class="card" id="p4">
      <h2>é—œå¡å››ï½œé–‹é–è¡Œå‹•ï¼šä½¿é¤¨å¯†æ«ƒ</h2>
      <p class="muted">é–‹å•Ÿé»‘å…‰æª¢è¦–å­—è·¡ï¼Œå°‡ç¾…é¦¬æ•¸å­—è½‰ç‚ºå¹´ä»½å¾Œé–‹é–ã€‚</p>
      <div class="hint" style="margin-bottom:8px">
        <label><input type="checkbox" id="uvToggle"> é–‹å•Ÿé»‘å…‰ï¼ˆé¡¯ç¤ºéš±è—å¢¨è·¡ï¼‰</label>
        <div id="uvMsg" class="muted">é»‘å…‰é—œé–‰ä¸­</div>
      </div>
      <div style="position:relative; padding:10px; border:1px solid #2a3c66; border-radius:10px; background:linear-gradient(180deg,#0e141f,#0b101a)">
        <div class="muted">ä¾¿æ¢ç´™ï¼š</div>
        <p style="margin:6px 0 0">ã€Œ<span class="uv hidden" id="uv1">Anno: <strong>MDCCCXCVI</strong></span><span class="uvOff">å¢¨è·¡æ¨¡ç³Šï¼Œåªçœ‹è¦‹å¹¾å€‹ç­†ç•«èˆ‡å­—æ¯æ®˜å½±ã€‚</span>ã€</p>
      </div>
      <div class="lock" id="lockYear">
        <div class="dial"><button data-idx="0">0</button></div>
        <div class="dial"><button data-idx="1">0</button></div>
        <div class="dial"><button data-idx="2">0</button></div>
        <div class="dial"><button data-idx="3">0</button></div>
      </div>
      <div style="display:flex; gap:8px; justify-content:center">
        <button class="btn" id="checkP4">è§£é–</button>
        <button class="btn ghost" id="hintP4">æç¤º</button>
      </div>
      <p id="p4Res"></p>
      <div id="p4Explain" class="hidden">
        <h3>è¬›è§£</h3>
        <p class="muted">ç¾…é¦¬æ•¸å­— <em>MDCCCXCVI</em> å°æ‡‰ <strong>1896</strong>ã€‚äº‹ä»¶ç™¼ç”Ÿæ–¼ 1896 å¹´ 10 æœˆä¸¦å¼•ç™¼å„ç•Œé—œæ³¨ã€‚</p>
      </div>
    </section>

    <!-- Puzzle 5 -->
    <section class="card" id="p5">
      <h2>é—œå¡äº”ï½œå»¶çºŒæ€§æ•´åˆé¡Œ</h2>
      <p class="muted">æ ¹æ“šå‰å››é—œçš„è³‡è¨Šï¼Œå®Œæˆä¸‹åˆ—ä¸‰éƒ¨åˆ†æ¸¬é©—ï¼ˆä¸éœ€è¼¸å…¥å§“åï¼‰ã€‚</p>

      <div class="p5-block">
        <h3>ï¼ˆAï¼‰å“ªäº›åŠ›é‡ç›´æ¥ä¿ƒæˆå­«ä¸­å±±ç²é‡‹ï¼Ÿï¼ˆå¯è¤‡é¸ï¼‰</h3>
        <div class="p5-choices">
          <label><input type="checkbox" name="actors" value="cantlie"> åº·å¾·é»ï¼ˆJames Cantlieï¼‰</label>
          <label><input type="checkbox" name="actors" value="media"> è‹±åœ‹åª’é«”ï¼ˆå¦‚ The Timesï¼‰</label>
          <label><input type="checkbox" name="actors" value="yard"> è˜‡æ ¼è˜­å ´ï¼ˆå€«æ•¦è­¦å¯Ÿå»³ï¼‰</label>
          <label><input type="checkbox" name="actors" value="fo"> è‹±åœ‹å¤–äº¤éƒ¨ï¼ˆForeign Officeï¼‰</label>
          <label><input type="checkbox" name="actors" value="macartney"> é¦¬å˜‰ç†ï¼ˆHalliday Macartneyï¼‰</label>
          <label><input type="checkbox" name="actors" value="location"> ä½¿é¤¨æ‰€åœ¨åœ°ï¼ˆPortland Placeï¼‰</label>
        </div>
      </div>

      <div class="p5-block">
        <h3>ï¼ˆBï¼‰åœ¨ã€Œåª’é«”é—œæ³¨ã€ä¹‹å¾Œï¼Œåˆç†çš„ä¸‹ä¸€æ­¥æ˜¯ï¼Ÿ</h3>
        <select id="p5Next1">
          <option value="">â€” è«‹é¸æ“‡ â€”</option>
          <option value="police">è­¦æ–¹ä»‹å…¥ï¼ˆè˜‡æ ¼è˜­å ´ï¼‰</option>
          <option value="fo">å¤–äº¤éƒ¨æ–½å£“</option>
          <option value="location">å›åˆ°ä½¿é¤¨ç¾å ´</option>
        </select>
        <h3 style="margin-top:10px">ï¼ˆCï¼‰åœ¨ã€Œè­¦æ–¹ä»‹å…¥ã€ä¹‹å¾Œï¼Œåˆç†çš„ä¸‹ä¸€æ­¥æ˜¯ï¼Ÿ</h3>
        <select id="p5Next2">
          <option value="">â€” è«‹é¸æ“‡ â€”</option>
          <option value="fo">å¤–äº¤éƒ¨æ–½å£“</option>
          <option value="media">å†æ¬¡åª’é«”æ›å…‰</option>
          <option value="macartney">èˆ‡é¦¬å˜‰ç†è«‡åˆ¤</option>
        </select>
      </div>

      <div class="p5-block">
        <h3>ï¼ˆDï¼‰æ³•ç†äº’å‹•çš„ç†è§£ï¼ˆå–®é¸ï¼‰</h3>
        <div class="p5-choices">
          <label><input type="radio" name="law" value="correct"> ä½¿é¤¨ä¸»å¼µå¤–äº¤è±å…ï¼Œä½†è‹±åœ‹ç¤¾æœƒå¼·èª¿äººèº«è‡ªç”±ï¼›å…©è€…çš„ç•Œç·šåœ¨æ­¤äº‹ä»¶ä¸­æˆç‚ºå…¬å…±è¨è«–ç„¦é»ã€‚</label>
          <label><input type="radio" name="law" value="wrong1"> å¤–äº¤è±å…æ„å‘³ä½¿é¤¨å¯ä¸å—ä»»ä½•æ³•å¾‹é™åˆ¶ï¼Œè­¦æ–¹èˆ‡å¤–äº¤éƒ¨ä¸å¾—ä»‹å…¥ã€‚</label>
          <label><input type="radio" name="law" value="wrong2"> äººèº«è‡ªç”±ä¿éšœåªé©ç”¨æœ¬åœ‹å…¬æ°‘ï¼Œæ•…æ­¤æ¡ˆä¸æ§‹æˆçˆ­è­°ã€‚</label>
        </div>
      </div>

      <div style="display:flex; gap:8px">
        <button class="btn" id="checkP5">é€å‡ºç­”æ¡ˆ</button>
        <button class="btn ghost" id="resetP5">é‡è¨­</button>
      </div>
      <p id="p5Res"></p>
      <div id="p5Explain" class="hidden">
        <h3>è¬›è§£èˆ‡ç¸½çµ</h3>
        <ul class="muted">
          <li><strong>ç›´æ¥æ¨åŠ›ï¼š</strong>åº·å¾·é»çš„å¥”èµ°èˆ‡è‹±åª’å ±å°åŒ¯èšç¤¾æœƒå£“åŠ›ï¼›è­¦æ–¹èˆ‡å¤–äº¤éƒ¨ä»¥åˆ¶åº¦èˆ‡æ¬Šè²¬ä»‹å…¥ï¼Œå½¢æˆå¤šæ–¹åˆåŠ›ã€‚</li>
          <li><strong>åºåˆ—ï¼š</strong>åª’é«”é—œæ³¨ä¹‹å¾Œé€šå¸¸æ˜¯è­¦æ–¹ä»‹å…¥ï¼Œå†ç”±å¤–äº¤éƒ¨æ–½å£“æ–¼ä½¿é¤¨ç«¯ã€‚</li>
          <li><strong>æ³•ç†ï¼š</strong>å¤–äº¤è±å…ä¸¦éç„¡é‚Šç•Œï¼›åœ¨äººèº«è‡ªç”±ç‚ºæ ¸å¿ƒåƒ¹å€¼çš„è„ˆçµ¡ä¸‹ï¼Œå¼•ç™¼å…¬é–‹è¾¯è«–èˆ‡æ”¿åºœè¡Œå‹•ã€‚</li>
        </ul>
      </div>
    </section>
  </div>

  <footer style="text-align:center; color:var(--muted); padding:24px">Â© 2025 æ¨ç†è§£è¬æ•™è‚²é ï¼ˆå–®æª”ã€ç„¡å¤–æ›ï¼‰ã€‚</footer>

  <script>
    // ---- HUD / Progress ----
    const state = {p1:false,p2:false,p3:false,p4:false,p5:false};
    const pg = document.getElementById('pg');
    const pgTxt = document.getElementById('pgTxt');
    const badges = [ 'b1','b2','b3','b4','b5' ].map(id=>document.getElementById(id));
    function updateProgress(){
      const done = Object.values(state).filter(Boolean).length; const pct = Math.round(done/5*100);
      pg.style.width = pct+'%'; pgTxt.textContent = `${done}/5 é—œå¡å®Œæˆ`;
      badges.forEach((b, i)=>{ b.classList.toggle('ok', Object.values(state)[i]); });
    }

    // ---- Puzzle 1: Caesar cipher ----
    const alphabet = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ';
    const pA = 'PORTLAND PLACE';
    const pB = 'JAMES CANTLIE';
    function caesarEnc(plain, shift){ return plain.toUpperCase().split('').map(ch=>{ const idx = alphabet.indexOf(ch); if(idx<0) return ch; return alphabet[(idx+shift)%26]; }).join(''); }
    function caesarDec(cipher, shift){ return cipher.toUpperCase().split('').map(ch=>{ const idx = alphabet.indexOf(ch); if(idx<0) return ch; return alphabet[(idx-(shift%26)+26)%26]; }).join(''); }
    const shiftA = Math.floor(Math.random()*25)+1; const shiftB = Math.floor(Math.random()*25)+1;
    const cA = caesarEnc(pA, shiftA); const cB = caesarEnc(pB, shiftB);
    document.getElementById('cipherA').textContent = cA;
    document.getElementById('cipherB').textContent = cB;
    const sA = document.getElementById('shiftA');
    const sB = document.getElementById('shiftB');
    const plainA = document.getElementById('plainA');
    const plainB = document.getElementById('plainB');
    function renderPlain(){ plainA.textContent = caesarDec(cA, parseInt(sA.value,10)); plainB.textContent = caesarDec(cB, parseInt(sB.value,10)); }
    sA.addEventListener('input', renderPlain); sB.addEventListener('input', renderPlain); renderPlain();
    document.getElementById('hintP1').addEventListener('click', ()=>{ alert('æç¤ºï¼šåœ°é»ç‚ºå…©å­—ï¼ˆP é–‹é ­ï¼‰ï¼Œäººç‰©æ˜¯æ—©å¹´æ©å¸«ï¼ˆJ é–‹é ­ï¼‰ã€‚'); });
    document.getElementById('checkP1').addEventListener('click', ()=>{
      const ok = (plainA.textContent.trim()===pA && plainB.textContent.trim()===pB);
      const res = document.getElementById('p1Res'); const exp = document.getElementById('p1Explain');
      if(ok){ res.textContent='âœ… ç ´è­¯æˆåŠŸï¼'; res.className='ok'; exp.classList.remove('hidden'); state.p1=true; updateProgress(); }
      else { res.textContent='âŒ å°šæœªæ­£ç¢ºï¼Œå†èª¿æ•´ä½ç§»ã€‚'; res.className='warn'; }
    });

    // ---- Puzzle 2: Map order ----
    const correctPath = ['A','B','C','D','E']; const sel = [];
    document.querySelectorAll('.place').forEach(el=>{
      el.addEventListener('click', ()=>{
        if(sel.length>=5) return; const k = el.dataset.k; sel.push(k); el.classList.add('selected');
        const node = document.createElement('span'); node.className='crumb'; node.textContent = el.textContent;
        document.getElementById('path').appendChild(node);
      });
    });
    document.getElementById('undoPath').addEventListener('click', ()=>{
      if(sel.length===0) return; const last = sel.pop();
      const cards = [...document.querySelectorAll('.place')]; cards.find(c=>c.dataset.k===last).classList.remove('selected');
      const crumbs = document.getElementById('path'); crumbs.removeChild(crumbs.lastElementChild);
    });
    document.getElementById('hintP2').addEventListener('click', ()=>{ alert('æç¤ºï¼šä½¿é¤¨â†’é†«å¸«â†’åª’é«”â†’è­¦æ–¹â†’å¤–äº¤éƒ¨ã€‚'); });
    document.getElementById('checkP2').addEventListener('click', ()=>{
      const res = document.getElementById('p2Res'); if(sel.length!==5){ res.textContent='è«‹å…ˆé¸æ»¿ 5 å€‹åœ°é»ã€‚'; res.className='warn'; return; }
      const ok = sel.every((v,i)=> v===correctPath[i]);
      if(ok){ res.textContent='âœ… è·¯å¾‘æ­£ç¢ºï¼'; res.className='ok'; document.getElementById('p2Explain').classList.remove('hidden'); state.p2=true; updateProgress(); }
      else { res.textContent='âŒ è·¯å¾‘ä¸å°ï¼Œå†æª¢è¦–è³‡è¨Šæµå‘ã€‚'; res.className='warn'; }
    });

    // ---- Puzzle 3: Evidence board (desktop drag OR mobile dropdown) ----
    const pool = document.getElementById('cluesPool');
    const zones = document.querySelectorAll('.zone');
    const clues = [...document.querySelectorAll('.clue')];
    const isTouch = ('ontouchstart' in window) || (navigator.maxTouchPoints>0);
    const p3Desktop = document.getElementById('p3Desktop');
    const p3Mobile  = document.getElementById('p3Mobile');
    p3Desktop.classList.toggle('hidden', isTouch);
    p3Mobile.classList.toggle('hidden', !isTouch);

    if(!isTouch){
      // Desktop drag & drop
      let dragging=null;
      clues.forEach(c=>{ c.addEventListener('dragstart',()=>{ dragging=c; c.classList.add('dragging'); }); c.addEventListener('dragend',()=>{ dragging=null; c.classList.remove('dragging'); }); });
      zones.forEach(z=>{ z.addEventListener('dragover', (e)=>{ e.preventDefault(); }); z.addEventListener('drop', ()=>{ if(dragging) z.appendChild(dragging); }); });
      pool && pool.addEventListener('dragover', e=> e.preventDefault());
    }

    document.getElementById('hintP3').addEventListener('click', ()=>{ alert('æç¤ºï¼šæ³•ç†=å¤–äº¤è±å…/äººèº«è‡ªç”±ï¼›è¼¿è«–=åª’é«”/åœ‹éš›ï¼›è¡Œå‹•=è­¦æ–¹/å¤–äº¤éƒ¨/åº·å¾·é»ã€‚'); });
    document.getElementById('checkP3').addEventListener('click', ()=>{
      const res = document.getElementById('p3Res');
      let good = 0;
      if(!isTouch){
        // Desktop: count in zones
        const getCount = type => document.querySelectorAll(`[data-zone="${type}"] .clue[data-cat="${type}"]`).length;
        good = getCount('law') + getCount('op') + getCount('act');
      } else {
        // Mobile: compare selections
        document.querySelectorAll('#p3Mobile .p3-mobile-row').forEach(row=>{
          const ans = row.dataset.ans; const sel = row.querySelector('select').value; if(ans && sel && ans===sel) good++;
        });
      }
      if(good>=6){ res.textContent=`âœ… æ­¸é¡å®Œæˆï¼æ­£ç¢º ${good}/7ã€‚`; res.className='ok'; document.getElementById('p3Explain').classList.remove('hidden'); state.p3=true; updateProgress(); }
      else { res.textContent=`âŒ ç›®å‰æ­£ç¢º ${good}/7ï¼Œé‚„å·®ä¸€é»ã€‚`; res.className='warn'; }
    });

    // ---- Puzzle 4: Safe lock ----
    const dialsY = [...document.querySelectorAll('#lockYear .dial button')]; const digitsY = [0,0,0,0];
    dialsY.forEach(btn=>{ btn.addEventListener('click', ()=>{ const idx = parseInt(btn.dataset.idx,10); digitsY[idx] = (digitsY[idx]+1)%10; btn.textContent = digitsY[idx]; }); });
    document.getElementById('uvToggle').addEventListener('change', (e)=>{
      const on = e.target.checked; document.getElementById('uvMsg').textContent = on ? 'é»‘å…‰é–‹å•Ÿï¼šéš±è—å¢¨è·¡å¯è¦‹ã€‚' : 'é»‘å…‰é—œé–‰ä¸­';
      document.querySelectorAll('.uv').forEach(el=> el.classList.toggle('hidden', !on)); document.querySelectorAll('.uvOff').forEach(el=> el.classList.toggle('hidden', on));
    });
    document.getElementById('hintP4').addEventListener('click', ()=>{ alert('æç¤ºï¼šå°‡ç¾…é¦¬æ•¸å­—è½‰æˆé˜¿æ‹‰ä¼¯æ•¸å­—ã€‚'); });
    document.getElementById('checkP4').addEventListener('click', ()=>{
      const res = document.getElementById('p4Res'); const okYear = (digitsY.join('')==='1896');
      if(okYear){ res.textContent='âœ… å·²è§£é–ï¼'; res.className='ok'; document.getElementById('p4Explain').classList.remove('hidden'); state.p4=true; updateProgress(); }
      else { res.textContent='âŒ çµ„åˆä¸å°ï¼Œæ‰“é–‹é»‘å…‰å†æ‰¾ç·šç´¢ã€‚'; res.className='warn'; }
    });

    // ---- Puzzle 5: Integrative quiz ----
    function getChecked(name){ return [...document.querySelectorAll(`input[name="${name}"]:checked`)].map(i=>i.value); }
    document.getElementById('checkP5').addEventListener('click', ()=>{
      const a = getChecked('actors'); const aOK = ['cantlie','media','yard','fo']; const aCorrect = a.length===aOK.length && a.every(v=> aOK.includes(v));
      const n1 = document.getElementById('p5Next1').value; const n2 = document.getElementById('p5Next2').value; const seqOK = (n1==='police' && n2==='fo');
      const law = (document.querySelector('input[name="law"]:checked')||{}).value; const lawOK = (law==='correct');
      const res = document.getElementById('p5Res'); const exp = document.getElementById('p5Explain');
      const allOK = aCorrect && seqOK && lawOK;
      if(allOK){ res.textContent='âœ… å…¨éƒ¨æ­£ç¢ºï¼ä½ å·²å®Œæˆæ•´åˆé¡Œã€‚'; res.className='ok'; exp.classList.remove('hidden'); state.p5=true; updateProgress(); }
      else {
        let msg = 'âŒ å°šæœªå…¨å°ï¼š';
        if(!aCorrect) msg += 'ï¼ˆAï¼‰å†æª¢è¦–ç›´æ¥æ¨åŠ›ï¼›';
        if(!seqOK)  msg += 'ï¼ˆBï¼‰ï¼ˆCï¼‰è·¯å¾‘é †åºå†æƒ³æƒ³ï¼›';
        if(!lawOK)  msg += 'ï¼ˆDï¼‰ç•™æ„å¤–äº¤è±å…èˆ‡äººèº«è‡ªç”±çš„ç•Œç·šã€‚';
        res.textContent = msg; res.className='warn';
      }
    });
    document.getElementById('resetP5').addEventListener('click', ()=>{
      document.querySelectorAll('input[name="actors"]').forEach(i=> i.checked=false);
      document.getElementById('p5Next1').value=''; document.getElementById('p5Next2').value='';
      const selLaw = document.querySelector('input[name="law"]:checked'); if(selLaw) selLaw.checked=false;
      document.getElementById('p5Res').textContent=''; document.getElementById('p5Explain').classList.add('hidden');
      state.p5=false; updateProgress();
    });
  </script>

  
<!-- ç‰ˆé¢åŸºåº•ï¼ˆä¸å½±éŸ¿ä½ åŸæœ¬é¡Œç›®æ¨£å¼ï¼›å‘½åé›†ä¸­åœ¨ #introOverlay ç¯„åœå…§ï¼‰ -->
  <style>
    :root{
      --ink:#e6efff; --muted:#9db0cf; --panel:#0c1426;
      --stroke:#2a3c66; --accent:#ffb84d; --accent2:#70d6ff;
      --bgA:#0c101c; --bgB:#070a12;
    }
    html,body{height:100%}
    body{
      margin:0; color:var(--ink);
      background:linear-gradient(180deg, var(--bgA), var(--bgB));
      font-family:system-ui,-apple-system,"Noto Sans TC","Microsoft JhengHei",Segoe UI,Roboto,Arial,sans-serif;
    }
    /* ä¸»å…§å®¹åƒ…ç¤ºæ„ï¼Œæ­£å¼ä¸²æ¥æ™‚ä¿ç•™ä½ çš„é¡Œç›®å³å¯ */
    header{
      padding:28px 18px; text-align:center;
      background:linear-gradient(180deg,#101827,#0f1626);
      border-bottom:1px solid #1f2c48;
    }
    header h1{ margin:0 0 6px; font-size:1.8rem; letter-spacing:1px }
    header p{ margin:0; color:var(--muted) }
    .wrap{ max-width:1100px; margin:20px auto; padding:0 16px }
    .card{
      background:linear-gradient(180deg, #131c2e, #0f1727);
      border:1px solid #1f2c48; border-radius:14px; padding:16px;
      box-shadow:0 8px 26px rgba(0,0,0,.3);
    }

    /* ===================== [Story Intro Module] ===================== */
    /* è¦†è“‹å±¤ */
    #introOverlay{
      position:fixed; inset:0; z-index:9999; display:none;
      background: radial-gradient(1200px 800px at 50% 0%, rgba(12,16,28,0.96), rgba(6,8,16,0.98));
      color:var(--ink);
    }
    #introOverlay .scene{ position:relative; width:100%; height:100% }

    /* æ˜Ÿç©ºï¼ˆå¤šå±¤è¦–å·®ï¼‰ */
    .stars, .stars2, .stars3{
      position:absolute; inset:0; background-repeat:repeat;
      background-image:
        radial-gradient(2px 2px at 20px 30px, rgba(255,255,255,.8), transparent 60%),
        radial-gradient(1.5px 1.5px at 150px 120px, rgba(255,255,255,.6), transparent 60%),
        radial-gradient(1.5px 1.5px at 300px 80px, rgba(255,255,255,.7), transparent 60%),
        radial-gradient(2px 2px at 500px 200px, rgba(255,255,255,.9), transparent 60%);
      animation: drift 80s linear infinite; opacity:.36; pointer-events:none;
    }
    .stars2{ filter:blur(.6px); opacity:.25; animation-duration:120s }
    .stars3{ filter:blur(1.1px); opacity:.18; animation-duration:160s }
    @keyframes drift{ from{background-position:0 0} to{background-position:-800px 600px} }

    /* èŸ²æ´ï¼ˆå¤šå±¤æ—‹è½‰ï¼‹å…‰æšˆï¼‰ */
    .wormhole{
      position:absolute; left:50%; top:45%; transform:translate(-50%,-50%);
      width:min(70vmin,560px); height:min(70vmin,560px); border-radius:50%;
      background:
        radial-gradient(closest-side, rgba(112,214,255,.30), transparent 70%),
        conic-gradient(from 0deg, rgba(112,214,255,.18), rgba(255,184,77,.12), rgba(112,214,255,.18));
      box-shadow:0 0 40px rgba(112,214,255,.35), inset 0 0 60px rgba(255,184,77,.25);
      animation: spin 12s linear infinite;
    }
    .wormhole::before,.wormhole::after{
      content:""; position:absolute; inset:6%; border-radius:50%;
      background: conic-gradient(from 180deg, rgba(112,214,255,.4), transparent 60%, rgba(255,184,77,.35));
      filter: blur(3px); animation: spinReverse 18s linear infinite;
    }
    .wormhole::after{ inset:12%; filter:blur(6px); animation-duration:26s }
    @keyframes spin{ to{ transform:translate(-50%,-50%) rotate(360deg) } }
    @keyframes spinReverse{ to{ transform: rotate(-360deg) } }

    /* æ•˜äº‹é¢æ¿ï¼ˆæ‰“å­—æ©Ÿï¼‰ */
    .panel{
      position:absolute; left:50%; bottom:8%; transform:translateX(-50%);
      width:min(820px, 92vw);
      background:linear-gradient(180deg, #121A2C, #0C1426);
      border:1px solid var(--stroke); border-radius:16px;
      box-shadow:0 10px 40px rgba(0,0,0,.45); padding:16px 18px;
    }
    .panel h2{ margin:0 0 6px; font-size:1.4rem; letter-spacing:1px }
    .panel .sub{ margin:0 0 10px; color:var(--muted); font-size:.95rem }
    #typeBox{ min-height:96px; line-height:1.75 }
    .typeLine{ opacity:0 }
    .typeLine.show{ opacity:1; transition:opacity .25s ease }
    .cursor{ display:inline-block; width:10px; margin-left:2px; border-left:2px solid var(--accent); animation:blink .9s step-end infinite }
    @keyframes blink{ 50%{ border-color:transparent } }

    .btnRow{ display:flex; flex-wrap:wrap; gap:10px; margin-top:12px }
    .btn{
      appearance:none; border:1px solid #274064;
      background:linear-gradient(180deg,#1d2d4a,#16233b);
      color:#eaf2ff; border-radius:10px; padding:10px 14px; cursor:pointer; font-weight:700
    }
    .btn.primary{ background:linear-gradient(180deg,#2a3c66,#1b2a4d); border-color:#33528a }
    .btn:hover{ filter:brightness(1.06) }

    /* å°è¢å¹•èª¿æ•´ */
    @media (max-width:520px){
      .panel{ bottom:4% }
      .wormhole{ top:38%; width:min(64vmin,480px); height:min(64vmin,480px) }
    }
    /* å°Šé‡ç³»çµ±æ¸›å°‘å‹•æ…‹è¨­å®š */
    @media (prefers-reduced-motion: reduce){
      .stars, .stars2, .stars3, .wormhole, .wormhole::before, .wormhole::after{ animation:none !important }
    }
    /* =================== [End Story Intro Module] =================== */
  </style>
</head>
<body>

  <!-- ä¸»å…§å®¹ï¼ˆå ä½ï¼›ä½ çš„æ­£å¼é¡Œç›®é å¯ä¿ç•™åŸå…§å®¹ï¼‰ -->
  <header>
    <h1>å€«æ•¦è¡Œå‹•æª”æ¡ˆï½œå‰å°èªªæ›¸ï¼ˆè‡ªå‹•æ’­æ”¾ï¼‰</h1>
    <p class="muted">æ­¤é åƒ…æ¸¬è©¦ã€Œèªªæ›¸å‰å°å‹•ç•«ã€ã€‚ä½ çš„è§£è¬é¡Œç›®ä¿æŒåŸæª”ä¸æ”¹ã€‚</p>
  </header>
  <main class="wrap">
    <section class="card">
      <h2>ä¸»å…§å®¹å ä½</h2>
      <p class="muted">ä¸²æ¥æ™‚ï¼Œå°‡ä¸‹æ–¹ <strong>Story Intro Module</strong> æ•´æ®µè²¼åˆ°ä½ çš„ <code>index.html</code> çš„ <code>&lt;/body&gt;</code> å‰å³å¯ã€‚</p>
    </section>
  </main>

  <!-- ===================== [Story Intro Module] ===================== -->
  <div id="introOverlay" role="dialog" aria-label="å‰å°æ•˜äº‹" aria-modal="true">
    <div class="scene" aria-hidden="true">
      <div class="stars"></div>
      <div class="stars2"></div>
      <div class="stars3"></div>
      <div class="wormhole" aria-hidden="true"></div>
    </div>
    <div class="panel" role="document">
      <h2>æ™‚ç©ºç¶»è£‚ï¼šæª”æ¡ˆ 1896</h2>
      <p class="sub">å‰å°èªªæ›¸ï½œè«‹è·Ÿè‘—æ•˜äº‹é€²å…¥ä»»å‹™ç¾å ´</p>
      <div id="typeBox" aria-live="polite" aria-atomic="true"></div>
      <div class="btnRow">
        <button id="skipIntro" class="btn" aria-label="ç•¥éå‰å°">ç•¥é</button>
        <button id="beginIntro" class="btn primary" aria-label="ç«‹å³å‡ºç™¼">ç«‹å³å‡ºç™¼</button>
      </div>
    </div>
  </div>

  <script>
    // â€”â€” é€²é è‡ªå‹•æ’­æ”¾ï¼ˆä¸éœ€ä»»ä½•åƒæ•¸ï¼‰ï¼›ç§»é™¤æ‰€æœ‰é‡æ’­/ç•¥éæ¢ä»¶ â€”â€” //
    (function(){
      const overlay = document.getElementById('introOverlay');
      const typeBox = document.getElementById('typeBox');
      const skipBtn = document.getElementById('skipIntro');
      const goBtn   = document.getElementById('beginIntro');

      // ç­‰ DOM æº–å‚™å¥½å°±é¡¯ç¤ºï¼ˆé¿å…æŸäº›ç€è¦½å™¨åœ¨ <script> å°šæœªå¯æ“ä½œæ™‚å¤±æ•—ï¼‰
      document.addEventListener('DOMContentLoaded', () => {
        showIntro();
      });

      // é—œé–‰å‰å°
      skipBtn.addEventListener('click', closeIntro);
      goBtn.addEventListener('click', closeIntro);
      document.addEventListener('keydown', (e)=>{
        if(overlay.style.display==='block' && (e.key === 'Enter' || e.key === 'Escape')){
          closeIntro();
        }
      });

      function showIntro(){
        document.documentElement.style.overflow = 'hidden';  // é–èƒŒæ™¯æ²å‹•
        overlay.style.display = 'block';
        typeBox.innerHTML = '';
        runTypewriter().then(()=> goBtn.focus());
      }
      function closeIntro(){
        overlay.style.display = 'none';
        document.documentElement.style.overflow = '';
        const first = document.querySelector('button, [href], input, select, textarea');
        if(first){ first.focus(); }
      }

      // æ•˜äº‹å°è©ï¼ˆå¯è‡ªç”±æ›¿æ›ï¼‰
      const lines = [
        "æŸå€‹å¤œæ™šï¼Œæ­·å²çš„æ™‚é–“ç·šå‡ºç¾äº†è£‚ç¸«ã€‚",
        "ä½ å¾æª”æ¡ˆé¤¨å€¼å®ˆå®¤è·Œå…¥èŸ²æ´ï¼Œç©¿è¶Šåˆ° 1896 å¹´çš„å€«æ•¦ã€‚",
        "æœ‰äººæ­£åœ¨æŠ¹é™¤ä¸€æ®µé—œéµçš„æ•‘æ´è¨˜éŒ„â€”â€”å²æ–™ä¸»è§’çš„å‘½é‹å²Œå²Œå¯å±ã€‚",
        "è¦æ¢å¾©æ­£ç¢ºçš„æ™‚é–“ç·šï¼Œä½ å¿…é ˆå®Œæˆå››é …ä»»å‹™ï¼šç ´è­¯ã€è·¯å¾‘ã€æ­¸é¡ã€è§£é–ã€‚",
        "æº–å‚™å¥½äº†å—ï¼ŸæŒ‰ä¸‹ã€Œç«‹å³å‡ºç™¼ã€ï¼Œå›åˆ°ç¾å ´ã€‚"
      ];

      async function runTypewriter(){
        for(const text of lines){
          const p = document.createElement('p');
          p.className = 'typeLine';
          typeBox.appendChild(p);
          await typeLine(p, text);
          await wait(420);
        }
      }
      function wait(ms){ return new Promise(r=>setTimeout(r, ms)); }
      async function typeLine(el, text){
        el.classList.add('show');
        el.innerHTML = '';
        const cursor = document.createElement('span');
        cursor.className = 'cursor';
        const reduce = window.matchMedia('(prefers-reduced-motion: reduce)').matches;
        if(reduce){ el.textContent = text; return; }
        for(let i=0;i<text.length;i++){
          el.textContent = text.slice(0,i+1);
          el.appendChild(cursor);
          await wait(22 + Math.random()*28);
        }
        await wait(260);
        cursor.remove();
      }
    })();
  </script>
  <!-- =================== [End Story Intro Module] =================== -->

 
</body>
</html>
